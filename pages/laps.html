<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="/pages/style.css">
    <title>Lap Records</title>
</head>
<body>
    <h1>Lap Records</h1>
    <p>Welcome to ac shared memory. This page shows you your completed lap times</p>
    <a href="/"><img src="/pages/images/left.png"></a>
    <a href="/laps">Reload</a>
    <form action="/laps" method="GET" class="filter">
        <label for="track-select">Select Track:</label>
        <select id="track-select" name="track">
            <option value="">All Tracks</option>
            %for track in tracks:
                <option value="{{track}}">{{track}}</option>
            %end
        </select>
        <button type="submit">Filter</button>
    </form>

    <table>
        <tr>
            <th>
                <form action="/laps" method="GET">
                    <input type="hidden" name="track" value="{{request.query.track}}">
                    <button type="submit" name="sort_by" value="lap_time">Time</button>
                </form>
            </th>
            <th>
                <form action="/laps" method="GET">
                    <input type="hidden" name="track" value="{{request.query.track}}">
                    <button type="submit" name="sort_by" value="track">Track</button>
                </form>
            </th>
            <th>
                <form action="/laps" method="GET">
                    <input type="hidden" name="track" value="{{request.query.track}}">
                    <button type="submit" name="sort_by" value="car_model">Car</button>
                </form>
            </th>
            <th>Driver</th>
            <th>Date</th>
        </tr>
        %for row in rows:
            <tr>
                <td class="time"><b>{{row[0]}}</b></td>
                <td>{{row[1]}}</td>
                <td>{{row[2]}}</td>
                <td>{{row[3]}}</td>
                <td>{{row[4]}}</td>
            </tr>
        %end
    </table>
</body>
</html>
